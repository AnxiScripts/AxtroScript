-- Destroy previous GUI instance if injected again
pcall(function() game.CoreGui:FindFirstChild("CodeNinjaUI"):Destroy() end)

-- Create UI screen
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "CodeNinjaUI"
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 600, 0, 350)
MainFrame.Position = UDim2.new(0.5, -300, 0.5, -175)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
local corner = Instance.new("UICorner", MainFrame)
corner.CornerRadius = UDim.new(0, 10)

-- Title
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "‚ö° CodeNinja UI"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(255, 255, 255)

-- Sidebar
local Sidebar = Instance.new("Frame", MainFrame)
Sidebar.Size = UDim2.new(0, 140, 1, -40)
Sidebar.Position = UDim2.new(0, 0, 0, 40)
Sidebar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 8)

-- Content Frame
local Content = Instance.new("Frame", MainFrame)
Content.Size = UDim2.new(1, -150, 1, -50)
Content.Position = UDim2.new(0, 150, 0, 45)
Content.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Instance.new("UICorner", Content).CornerRadius = UDim.new(0, 8)

-- Tab system
local Tabs = {}
local TabNames = {"Scripts", "Settings", "Credits"}
local function CreateTab(name, index)
	local btn = Instance.new("TextButton", Sidebar)
	btn.Size = UDim2.new(1, -20, 0, 40)
	btn.Position = UDim2.new(0, 10, 0, (index - 1) * 50 + 10)
	btn.Text = "üìÅ " .. name
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 14
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

	local tabFrame = Instance.new("Frame", Content)
	tabFrame.Size = UDim2.new(1, 0, 1, 0)
	tabFrame.BackgroundTransparency = 1
	tabFrame.Visible = (index == 1)
	Tabs[name] = tabFrame

	btn.MouseButton1Click:Connect(function()
		for _, v in pairs(Tabs) do v.Visible = false end
		tabFrame.Visible = true
	end)
end

for i, tabName in ipairs(TabNames) do
	CreateTab(tabName, i)
end

-- === Scripts Tab ===
do
	local tab = Tabs["Scripts"]

	local InfiniteBtn = Instance.new("TextButton", tab)
	InfiniteBtn.Size = UDim2.new(0, 200, 0, 35)
	InfiniteBtn.Position = UDim2.new(0, 20, 0, 20)
	InfiniteBtn.Text = "üåå Load Infinite Yield"
	InfiniteBtn.Font = Enum.Font.Gotham
	InfiniteBtn.TextSize = 14
	InfiniteBtn.TextColor3 = Color3.fromRGB(255,255,255)
	InfiniteBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
	Instance.new("UICorner", InfiniteBtn).CornerRadius = UDim.new(0, 6)

	InfiniteBtn.MouseButton1Click:Connect(function()
		loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
	end)

	local UrlBox = Instance.new("TextBox", tab)
	UrlBox.Size = UDim2.new(0, 300, 0, 30)
	UrlBox.Position = UDim2.new(0, 20, 0, 70)
	UrlBox.PlaceholderText = "Paste GitHub Raw URL..."
	UrlBox.Text = ""
	UrlBox.Font = Enum.Font.Gotham
	UrlBox.TextSize = 13
	UrlBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	UrlBox.TextColor3 = Color3.fromRGB(255,255,255)
	Instance.new("UICorner", UrlBox).CornerRadius = UDim.new(0, 6)

	local RunBtn = Instance.new("TextButton", tab)
	RunBtn.Size = UDim2.new(0, 100, 0, 30)
	RunBtn.Position = UDim2.new(0, 330, 0, 70)
	RunBtn.Text = "üöÄ Run"
	RunBtn.Font = Enum.Font.GothamBold
	RunBtn.TextSize = 14
	RunBtn.TextColor3 = Color3.fromRGB(255,255,255)
	RunBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
	Instance.new("UICorner", RunBtn).CornerRadius = UDim.new(0, 6)

	RunBtn.MouseButton1Click:Connect(function()
		local url = UrlBox.Text
		if url:match("^https?://") then
			pcall(function()
				loadstring(game:HttpGet(url))()
			end)
		end
	end)
end

-- === Settings Tab ===
do
	local tab = Tabs["Settings"]
	local toggle = Instance.new("TextButton", tab)
	toggle.Size = UDim2.new(0, 200, 0, 35)
	toggle.Position = UDim2.new(0, 20, 0, 20)
	toggle.Font = Enum.Font.Gotham
	toggle.TextSize = 14
	toggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
	Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 8)

	local state = false
	local function UpdateToggle()
		toggle.Text = "üîò Auto ESP: " .. (state and "ON" or "OFF")
		toggle.BackgroundColor3 = state and Color3.fromRGB(100, 180, 255) or Color3.fromRGB(50, 50, 50)
	end

	toggle.MouseButton1Click:Connect(function()
		state = not state
		UpdateToggle()
	end)

	UpdateToggle()
end

-- === Credits Tab ===
do
	local tab = Tabs["Credits"]
	local lbl = Instance.new("TextLabel", tab)
	lbl.Size = UDim2.new(1, -40, 1, -40)
	lbl.Position = UDim2.new(0, 20, 0, 20)
	lbl.BackgroundTransparency = 1
	lbl.Font = Enum.Font.Gotham
	lbl.TextSize = 14
	lbl.TextColor3 = Color3.fromRGB(220,220,220)
	lbl.TextWrapped = true
	lbl.TextXAlignment = Enum.TextXAlignment.Left
	lbl.TextYAlignment = Enum.TextYAlignment.Top
	lbl.Text = "üß† CodeNinja GUI\nInspired by SpeedHubX & Native UIs.\nCustom-built without libraries.\nUse responsibly."
end
